#!/bin/zsh

if [ $1 = "install" ] || [ $1 = "i" ]; then
  if [ -d ${HOME}/.inkaku/$2 ]; then
    if [ -r ${HOME}/.inkaku/$2/Brewfile ]; then
      brew bundle --file=${HOME}/.inkaku/$2/Brewfile
    fi
    if [ -f ${HOME}/.inkaku/$2/install ]; then
      zsh ${HOME}/.inkaku/$2/install
    fi
    if [ -e ~/.inkaku/$2/.zshrc ]; then
      if [ ! $(grep -w $2 ~/.inkaku/${USER}/.zshlist) ]; then
        echo $2 >> ~/.inkaku/${USER}/.zshlist
      fi
    fi
  fi
fi

if [ $1 = "init" ]; then
  if [ -d ~/.inkaku/${USER} ]; then
    mkdir -p ~/.inkaku/${USER}
    echo "${USER}" > ~/.inkaku/${USER}/.zshlist
    echo "" >> ~/.inkaku/${USER}/.zshrc
  fi
fi
